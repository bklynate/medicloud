!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=function(a,b){return{request:function(b){var c=sessionStorage.getItem("medicloud_user_credentials");return c&&(b.headers.Authorization="Basic "+c),b||a.when(b)},responseError:function(b){return console.log("Found responseError: ",b),401==b.status&&(console.log("Access denied (error 401), please login again"),window.location.href="/sign-in/"),a.reject(b)}}}},{}],2:[function(a,b,c){!function(){var b=a("./patient/patient.module"),c=a("./patients/patients.module"),d=a("../Shared/authorization.interceptor"),e=a("./calendar/calendar.module"),f=a("./error/error.directive");b(),c(),e();var g=new angular.module("hp-center",["ngRoute","hpPatient","hpPatientList","hpCalendar"]);g.config(["$routeProvider","$httpProvider",function(a,b){"use strict";a.when("/",{templateUrl:"dashboard/"}).otherwise({redirectTo:"/"}),b.interceptors.push(["$q","$location",d])}]),g.directive("mdErrorModal",f),angular.bootstrap(window.document,["hp-center"])}()},{"../Shared/authorization.interceptor":1,"./calendar/calendar.module":4,"./error/error.directive":8,"./patient/patient.module":17,"./patients/patients.module":20}],3:[function(a,b,c){b.exports=function(){return{link:function(a,b,c){function d(a){a.each(function(){var a={title:$.trim($(this).text())};$(this).data("eventObject",a),$(this).draggable({zIndex:1070,revert:!0,revertDuration:0})})}d($("#external-events div.external-event"));var e=new Date,f=e.getDate(),g=e.getMonth(),h=e.getFullYear();$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},buttonText:{today:"today",month:"month",week:"week",day:"day"},events:[{title:"All Day Event",start:new Date(h,g,1),backgroundColor:"#f56954",borderColor:"#f56954"},{title:"Long Event",start:new Date(h,g,f-5),end:new Date(h,g,f-2),backgroundColor:"#f39c12",borderColor:"#f39c12"},{title:"Meeting",start:new Date(h,g,f,10,30),allDay:!1,backgroundColor:"#0073b7",borderColor:"#0073b7"},{title:"Lunch",start:new Date(h,g,f,12,0),end:new Date(h,g,f,14,0),allDay:!1,backgroundColor:"#00c0ef",borderColor:"#00c0ef"},{title:"Birthday Party",start:new Date(h,g,f+1,19,0),end:new Date(h,g,f+1,22,30),allDay:!1,backgroundColor:"#00a65a",borderColor:"#00a65a"},{title:"Click for Google",start:new Date(h,g,28),end:new Date(h,g,29),url:"http://google.com/",backgroundColor:"#3c8dbc",borderColor:"#3c8dbc"}],editable:!0,droppable:!0,drop:function(a,b){var c=$(this).data("eventObject"),d=$.extend({},c);d.start=a,d.allDay=b,d.backgroundColor=$(this).css("background-color"),d.borderColor=$(this).css("border-color"),$("#calendar").fullCalendar("renderEvent",d,!0),$("#drop-remove").is(":checked")&&$(this).remove()}});var i="#3c8dbc";$("#color-chooser-btn");$("#color-chooser > li > a").click(function(a){a.preventDefault(),i=$(this).css("color"),$("#add-new-event").css({"background-color":i,"border-color":i})}),$("#add-new-event").click(function(a){a.preventDefault();var b=$("#new-event").val();if(0!=b.length){var c=$("<div />");c.css({"background-color":i,"border-color":i,color:"#fff"}).addClass("external-event"),c.html(b),$("#external-events").prepend(c),d(c),$("#new-event").val("")}}),$("[data-date]").click(function(){a.modalControl.show=!a.modalControl.show;var b=$(this).attr("data-date");console.log("selectedDate is "+b),a.$apply(),console.log("show is "+a.modalControl.show)})},controller:["$scope","calendarService",function(a,b){a.modalControl={show:!1}}]}}},{}],4:[function(a,b,c){b.exports=function(){var b=a("./calendar.service.js"),c=a("../modalDialogue/modal.directive"),d=a("./calendar.js"),e=angular.module("hpCalendar",["ngRoute","hpPatientList"]);e.config(["$routeProvider",function(a){"use strict";a.when("/calendar/",{templateUrl:"calendar/calendar.html"})}]),e.service("calendarService",["$http","$rootScope","$resource",b]),e.directive("appointmentModalDirective",c),e.directive("calendarDirective",d)}},{"../modalDialogue/modal.directive":9,"./calendar.js":3,"./calendar.service.js":5}],5:[function(a,b,c){b.exports=function(a,b,c){var d,e,f=sessionStorage.getItem("medicloud_hp_id"),g="http://"+window.location.hostname+":8080/api/hp/:hpId/patients/:patientId",h={patients:[],getPatients:function(){var a=this,b=c(g,{hpId:f}),h=b.query().$promise;return h.then(function(b){angular.extend(a.patients,b),(d||angular.noop)(),d=null,e=null},function(a){(e||angular.noop)(a),d=null,e=null}),this.patients},onSuccess:function(a){return d=a,this},onFailure:function(a){return e=a,this}};return h}},{}],6:[function(a,b,c){b.exports=function(){var a=function(a,b){a.waiting=!1,a.$on("status.waiting",function(){a.waiting=!0,setTimeout(function(){a.$apply()},10)}),a.$on("status.ready",function(){a.waiting=!1,setTimeout(function(){a.$apply()},10)});var c=function(){a.suggestions=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(a){return a.id},local:b.data.conditions}),setTimeout(function(){a.$broadcast("conditionSearch.suggestions.updated")},200)};b.data.conditions&&c(),a.$on("infermedicaConditions_serv.data.updated",function(){c()})};return{templateUrl:"conditionSearch/conditionSearch.template.html",scope:{onSelect:"="},link:function(a,b,c){a.$on("conditionSearch.suggestions.updated",function(){b.find(".inputSearch").typeahead("destroy"),b.find(".inputSearch").typeahead({hint:!0,highlight:!0,minLength:1},{name:"conditions",source:a.suggestions,displayKey:"name",templates:{empty:['<div class="text-muted">',"No Suggestion","</div>"].join("\n"),suggestion:function(a){var b='<div class="list-group-item"><dl><dt>{{name}}<label class="label label-info pull-right">{{severity}}</label></dt><dd><em>{{categories}}</em></dd></div>',c=b.replace(/{{name}}/g,a.name).replace(/{{severity}}/g,a.severity).replace(/{{categories}}/g,a.categories.join(", "));return c}}}),b.find(".inputSearch").bind("typeahead:select",function(b,c){(a.onSelect||angular.noop)(c)})})},controller:["$scope","infermedicaConditions_serv",a]}}},{}],7:[function(a,b,c){b.exports=function(a,b){var c="http://"+window.location.hostname+"\\:8080/conditions",d=("http://"+window.location.hostname+"\\:8080/conditions/:condition_id",a(c,{condition_id:"@c_id"})),e={data:{conditions:[]},fetchAll:function(){var a=this;return a.data.conditions=d.query({},function(){b.$broadcast("infermedicaConditions_serv.data.updated")},function(a){b.$broadcast("infermedicaConditions_serv.data.error",a)}),d.$promise}};return e.fetchAll(),e}},{}],8:[function(a,b,c){b.exports=function(){return{scope:{error:"=",control:"="},templateUrl:"error/error.template.html",link:function(a,b,c){var d=$(b[0]).modal("hide");a.control={isShown:!1,show:function(b){a.error=b||a.error,d.modal("show"),d.on("modal.bs.shown",function(){a.isShown=!0})},hide:function(){d.modal("hide"),moda.on("modal.bs.hidden",function(){a.isShown=!1})}}}}}},{}],9:[function(a,b,c){b.exports=function(){return{restrict:"E",scope:{show:"=",submit:"="},replace:!0,transclude:!0,link:function(a,b,c){$(document).on("dblclick",function(){console.log("scope.show is "+a.show)}),a.$watch("show",function(a){a?$(b[0]).modal("show"):$(b[0]).modal("hide")}),b.on("submit",function(){for(var c=b[0].querySelectorAll("input,select,textarea"),d=c.length;d--;)c[d].addEventListener("invalid",function(){this.scrollIntoView(!1)});var e=a.patient;e=angular.extend({},a.patient),e.birthdate=b.find("[type=date]").val(),a.submit(e)})},templateUrl:"modalDialogue/modal.html",controller:["$scope","patientsListService",function(a,b){$('[data-toggle="tooltip"]').tooltip("disable"),a.patientList=b.getPatients(),$(document).on("dblclick",function(){console.log("patients list is "+a.patientList.patients)})}]}}},{}],10:[function(a,b,c){b.exports=function(a,b){var c="http://"+location.host+"/conditions/:condition_id",d=(a(c,{condition_id:"@id"},{insert:{method:"POST"}}),function(){this.conditionId=null,this.name="",this.description="",this.startObs=null,this.endObs=null});return d.prototype={constructor:d},d}},{}],11:[function(a,b,c){b.exports=function(a,b,c,d){a.patient=b.getPatient(d.patient_id),a.patient.fetchConditions(),a.newActiveConditionForms=[],a.getNewActiveConditionForm=function(){a.newActiveConditionForms.unshift({})},a.removeForm=function(b){return function(){a.newActiveConditionForms.splice(b,1)}}}},{}],12:[function(a,b,c){b.exports=function(){var a=function(a,b){a.mode="search",a.formatDate=function(a){return a?new Date(a):"none"},a.showSearch=function(){a.mode="search"},a.save=function(){b.addActiveCondition(a.condition.name,a.condition.severity,a.condition.description,a.condition.infer_c_id)},a.cancel=function(){(a.onCancelled||angular.noop)()},a.severityOptions=["mild","moderate","severe"],a.create=function(b){b&&(a.condition.name=b.name,a.condition.severity=b.severity,a.condition.infer_c_id=b.id,a.condition.description=""),a.mode="create",setTimeout(function(){a.$apply()},200)}};return{templateUrl:"patient/conditions/newActiveCondition.template.html",scope:{condition:"=condData",onSaved:"&",onCancelled:"&"},link:function(a,b,c){a.condition.name="",a.condition.severity="",a.condition.infer_c_id=null,a.condition.description="",a.confirm=function(){a.mode="confirm"}},controller:["$scope","models_service",a]}}},{}],13:[function(a,b,c){b.exports=function(a,b,c,d){a.incConditionList="patient/conditions/activeConditionList.html",a.incObservationList="patient/observations/observations.html",a.patient=b.getPatient(d.patient_id),a.modalMessage={show:!1,title:"patient/message/formMessage.title.html",body:"patient/message/formMessage.html",footer:"patient/message/formMessage.footer.html",actions:{send:function(){console.log("Sent")}}}}},{}],14:[function(a,b,c){b.exports=function(a,b,c){var d={patients:[],patientIndex:{}},e={getPatient:function(c){if(d.patientIndex.hasOwnProperty(c)){var e=d.patientIndex[c];return d.patients[e]}var f=d.patients.length;return d.patientIndex[c]=f,d.patients.push(new b(c)),d.patients[f].onLoad(function(b){a.$broadcast("patients.updated",d.patients[f])}),d.patients[f].onFailure(function(a){d.patients[f]=null,delete d.patientIndex[c]}),d.patients[f]},getPatients:function(){return model.patients},addActiveCondition:function(a,b,d,e){var f=new c;return f.name=a,f.severity=b,f.description=d,f.infer_c_id=e,console.log(f),f}};return e}},{}],15:[function(a,b,c){b.exports=function(a,b){a.modal={show:!1,addObservationForm:"patient/observations/addObservationForm.html",actions:{}};var c=function(){a.observations=b.data.observations};a.$on("patient_service.data.updated",function(){c()}),a.addObservationForm=function(){a.modal.show=!0}}},{}],16:[function(a,b,c){b.exports=function(a,b,c,d){var e=sessionStorage.getItem("medicloud_hp_id"),f="http://"+window.location.hostname+"\\:8080/api/hp/:hpId/patients/:patientId",g=a(f,{hpId:e,patientId:"@patientId"}),h=f+"/conditions/:conditionId",i=a(h,{hpId:e,patientId:"@patientId",conditionId:"@conditionId"}),j=function(a){this.patientId=a,this.onLoadCallback=angular.noop,this.onFailureCallback=angular.noop,this.conditions=[],this.observations=[],this.fetch()};return j.prototype={constructor:j,onLoad:function(a){this.onLoadCallback=a},onFailure:function(a){this.onFailureCallback=a},fetch:function(){var a=this,c=g.get({patientId:a.patientId},function(b,c){angular.extend(a,b),a.onLoadCallback.call(a,b)},function(c){b.$broadcast("error",c),a.onFailureCallback.call(a,c)});return c},fetchConditions:function(){var a=this;a.conditions=[];var c=i.query({patientId:a.patientId},function(b){angular.extend(a.conditions,b)},function(a){b.$broadcast("error",a)});return c}},j}},{}],17:[function(a,b,c){b.exports=function(){var b=a("../../Shared/authorization.interceptor"),c=a(".//main.controller"),d=a("./../share/modal.directive"),e=a("./models.service"),f=a("./patient.factory"),g=a("./profile/profile.controller"),h=a("./conditions/activeConditionList.controller"),i=a("./conditions/newActiveCondition.directive"),j=a("./conditions/activeCondition.factory"),k=a("./../conditionSearch/conditionSearch.directive"),l=a("./../conditionSearch/infermedicaConditions.service"),m=a("./observations/observations.controller"),n=angular.module("hpPatient",["ngRoute","ngResource"]);n.config(["$routeProvider","$httpProvider",function(a,c){"use strict";a.when("/patient/:patient_id/:tab?",{templateUrl:"patient/",controller:"profile_ctrl"}),c.interceptors.push(["$q","$location",b])}]),n.service("models_service",["$rootScope","patient_factory","activeCondition_factory",e]).service("infermedicaConditions_serv",["$resource","$rootScope",l]).service("patient_factory",["$resource","$rootScope","$route","$routeParams",f]).factory("activeCondition_factory",["$resource","$rootScope",j]),n.directive("mcConditionSearch",k).directive("mcNewActiveCondition",i).directive("mcModal",d),n.controller("profile_ctrl",["$scope","models_service","$route","$routeParams",g]).controller("conditionList_ctrl",["$scope","models_service","$route","$routeParams",h]).controller("observations_ctrl",["$scope","models_service","$route","$routeParams",m]).controller("main_ctrl",["$scope","models_service","$route","$routeParams",c])}},{"../../Shared/authorization.interceptor":1,"./../conditionSearch/conditionSearch.directive":6,"./../conditionSearch/infermedicaConditions.service":7,"./../share/modal.directive":23,".//main.controller":13,"./conditions/activeCondition.factory":10,"./conditions/activeConditionList.controller":11,"./conditions/newActiveCondition.directive":12,"./models.service":14,"./observations/observations.controller":15,"./patient.factory":16,"./profile/profile.controller":18}],18:[function(a,b,c){b.exports=function(a,b,c,d){a.patient=b.getPatient(d.patient_id)}},{}],19:[function(a,b,c){b.exports=function(){return{restrict:"E",scope:{show:"=",submit:"="},replace:!0,transclude:!0,link:function(a,b,c){a.$watch("show",function(a){a?$(b[0]).modal("show"):$(b[0]).modal("hide")}),b.on("submit",function(){for(var c=b[0].querySelectorAll("input,select,textarea"),d=c.length;d--;)c[d].addEventListener("invalid",function(){this.scrollIntoView(!1)});var e=a.patient;e=angular.extend({},a.patient),e.birthdate=b.find("[type=date]").val(),a.submit(e)})},templateUrl:"patients/formAddPatient/formAddPatient.html",controller:["$scope",function(a){$('[data-toggle="tooltip"]').tooltip("disable"),a.patient={firstName:"",lastName:""}}]}}},{}],20:[function(a,b,c){b.exports=function(){var b=a("./patientsList/patientsList.controller"),c=a("./patientsList/patientsList.service"),d=a("./formAddPatient/formAddPatient.directive"),e=a("../../Shared/authorization.interceptor"),f=angular.module("hpPatientList",["ngRoute"]);f.config(["$routeProvider","$httpProvider",function(a,b){"use strict";a.when("/patients/",{templateUrl:"patients/",controller:"patientsList_ctrl"}),b.interceptors.push(["$q","$location",e])}]),f.service("patientsListService",["$http","$rootScope","$resource",c]),f.directive("modalDialog",d),f.controller("patientsList_ctrl",["$scope","$rootScope","patientsListService",b])}},{"../../Shared/authorization.interceptor":1,"./formAddPatient/formAddPatient.directive":19,"./patientsList/patientsList.controller":21,"./patientsList/patientsList.service":22}],21:[function(a,b,c){b.exports=function(a,b,c){function d(){c.getPatients().onSuccess(function(b){a.patientList=c.patients}).onFailure(function(a){console.log(a)})}a.patientList=[],d(),a.status,a.modalShown=!1,a.patient={},a.toggleModal=function(){a.modalShown=!a.modalShown},a.contactClicked=!1,a.selectedPatient;$("#patientSuccessAlert").hide(),$("#patientFailureAlert").hide(),a.clicked=function(b){a.contactClicked=!0,a.selectedPatient=b},b.$on("patientAdded",function(){a.modalShown=!1}),a.addPatient=function(a){c.addPatient(a),$("#AddPatientForm")[0].reset()}}},{}],22:[function(a,b,c){b.exports=function(a,b,c){var d,e,f=sessionStorage.getItem("medicloud_hp_id"),g="http://"+window.location.hostname+":8080/api/hp/:hpId/patients/:patientId",h={patients:[{firstName:"Peter",lastName:"Parker",email:"peterparker@gmail.com"},{firstName:"Bruce",lastName:"Wayne",email:"brucewayne@gmail.com"}],getPatients:function(){var a=this,b=c(g,{hpId:f}),h=b.query().$promise;return h.then(function(b){a.patients=b,(d||angular.noop)(),d=null,e=null},function(a){(e||angular.noop)(a),d=null,e=null}),this},onSuccess:function(a){return d=a,this},onFailure:function(a){return e=a,this},addPatient:function(a){b.$broadcast("patientAdded");var d=c(g,{hpId:f});d.save(a,function(b){b.personId?(h.patients.push(a),$("#patientSuccessAlert").show(),setTimeout(function(){$("#patientSuccessAlert").fadeOut("slow")},3e3)):$("#patientFailureAlert").show(),console.log(b)})}};return h}},{}],23:[function(a,b,c){b.exports=function(){return{templateUrl:"share/modal.template.html",scope:{show:"=show",title:"=mcTitle",body:"=mcBody",footer:"=mcFooter",actions:"=mcActions"},link:function(a,b,c){a.$watch("show",function(a,c){a?b.find(".modal").modal("show"):b.find(".modal").modal("hide")}),b.find(".modal").on("shown.bs.modal",function(){a.show=!0,a.$apply()}),b.find(".modal").on("hidden.bs.modal",function(){a.show=!1,a.$apply()})}}}},{}]},{},[2]);